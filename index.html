<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LixynHay ‚Äî –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ</title>
  <meta name="description" content="–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ –∏–Ω–∂–µ–Ω–µ—Ä–∞ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ö°</text></svg>">
  <link rel="manifest" href="data:application/json,%7B%22name%22%3A%22LixynHay%22%2C%22short_name%22%3A%22LH%22%2C%22icons%22%3A%5B%7B%22src%22%3A%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg%3D%3D%22%2C%22sizes%22%3A%221x1%22%2C%22type%22%3A%22image%2Fpng%22%7D%5D%2C%22start_url%22%3A%22%2F%22%2C%22display%22%3A%22standalone%22%2C%22background_color%22%3A%22%23020617%22%2C%22theme_color%22%3A%22%2360a5fa%22%7D">
  <style>
    :root {
      --bg: #020617;
      --card: rgba(2, 6, 23, 0.9);
      --text: #e5e7eb;
      --muted: #94a3b8;
      --accent: #60a5fa;
      --transition: 0.5s ease;
    }
    body.light {
      --bg: #f8fafc;
      --card: rgba(255, 255, 255, 0.9);
      --text: #020617;
      --muted: #475569;
      --accent: #2563eb;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Inter, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      scroll-behavior: smooth;
      transition: background var(--transition), color var(--transition);
      overflow-x: hidden;
    }
    canvas { position: fixed; inset: 0; z-index: -1; }
    header { padding: 90px 20px 60px; text-align: center; perspective: 1000px; }
    header h1 { font-size: 3rem; margin: 0; transform: translateZ(0); transition: transform 0.3s; }
    header p { color: var(--muted); font-size: 1.2rem; transform: translateZ(0); transition: transform 0.3s; }
    nav { display: flex; justify-content: center; gap: 25px; margin-bottom: 40px; flex-wrap: wrap; }
    nav button { background: none; border: none; color: var(--accent); cursor: pointer; font-size: 1rem; position: relative; transition: color 0.3s; }
    nav button::after { content: ""; position: absolute; left: 0; bottom: -6px; width: 0; height: 2px; background: var(--accent); transition: 0.3s; }
    nav button:hover::after { width: 100%; }
    .controls { position: fixed; top: 20px; right: 20px; display: flex; gap: 10px; z-index: 20; }
    .controls button { padding: 6px 10px; border-radius: 8px; border: 1px solid #cbd5f5; background: var(--card); color: var(--text); cursor: pointer; transition: all var(--transition); }
    .controls button:hover { transform: scale(1.1); }
    .container { max-width: 1000px; margin: 0 auto 80px; padding: 0 20px; }
    section { opacity: 0; transform: translateY(30px); transition: opacity 0.8s, transform 0.8s; }
    section.visible { opacity: 1; transform: translateY(0); }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 25px; }
    .card { background: var(--card); border-radius: 18px; padding: 25px; position: relative; z-index: 1; box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15); transition: transform 0.5s ease, box-shadow 0.5s ease; }
    .card:hover { transform: translateY(-6px) scale(1.03); box-shadow: 0 35px 60px rgba(0, 0, 0, 0.25); }
    a { color: var(--accent); text-decoration: none; transition: color 0.3s; }
    a:hover { color: #fff; }
    footer { text-align: center; padding: 30px; color: var(--muted); font-size: 0.9rem; }
    .filter { margin-bottom: 20px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
    .filter button { padding: 6px 12px; border-radius: 6px; border: none; cursor: pointer; background: var(--card); color: var(--text); transition: all 0.3s; }
    .filter button.active { background: var(--accent); color: #fff; }
  </style>
</head>
<body>

<canvas id="bg" aria-hidden="true"></canvas>
<div class="controls">
  <button onclick="toggleTheme()" aria-label="Toggle theme">üåì</button>
  <button onclick="setLang('ru')" aria-label="Russian">RU</button>
  <button onclick="setLang('en')" aria-label="English">EN</button>
  <button onclick="downloadCV()" aria-label="Download CV">CV</button>
</div>

<header>
  <h1 id="typed"></h1>
  <p data-ru="–ò–Ω–∂–µ–Ω–µ—Ä –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å —Å–∏—Å—Ç–µ–º" data-en="Engineer & Systems Researcher"></p>
</header>

<nav>
  <button onclick="scrollToSection('home')" data-ru="–ì–ª–∞–≤–Ω–∞—è" data-en="Home"></button>
  <button onclick="scrollToSection('about')" data-ru="–û–±–æ –º–Ω–µ" data-en="About"></button>
  <button onclick="scrollToSection('projects')" data-ru="–ü—Ä–æ–µ–∫—Ç—ã" data-en="Projects"></button>
  <button onclick="scrollToSection('links')" data-ru="–ö–æ–Ω—Ç–∞–∫—Ç—ã" data-en="Contacts"></button>
</nav>

<div class="container">
  <section id="home">
    <div class="card">
      <h2 data-ru="–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ" data-en="Portfolio"></h2>
      <p data-ru="–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏—è–º–∏." data-en="A modern interactive portfolio with projects and animations."></p>
    </div>
  </section>

  <section id="about">
    <div class="grid">
      <div class="card">
        <h3 data-ru="–û–±–æ –º–Ω–µ" data-en="About me"></h3>
        <p data-ru="–Ø —É–≤–ª–µ—á—ë–Ω–Ω—ã–π –∏–Ω–∂–µ–Ω–µ—Ä –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å —Å–∏—Å—Ç–µ–º: Linux, Android, —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞, –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ. –õ—é–±–ª—é —Ä–∞–∑–±–∏—Ä–∞—Ç—å —Å–∏—Å—Ç–µ–º—ã –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –¥–µ—Ç–∞–ª–∏, –Ω–∞—Ö–æ–¥–∏—Ç—å —Å–∫—Ä—ã—Ç—ã–µ –±–∞–≥–∏ –∏ –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç." data-en="I am a passionate engineer and system researcher: Linux, Android, electronics, programming. I love dissecting systems, finding hidden bugs, and understanding how everything works."></p>
      </div>
      <div class="card">
        <h3 data-ru="–ù–∞–≤—ã–∫–∏" data-en="Skills"></h3>
        <ul>
          <li>Linux Kernel & Drivers</li>
          <li>ESP32 / Arduino</li>
          <li>C / C++ Programming</li>
          <li>Debugging & Log Analysis</li>
          <li>Hardware & Soldering</li>
        </ul>
      </div>
      <div class="card">
        <h3 data-ru="–ü–æ–¥—Ö–æ–¥" data-en="Approach"></h3>
        <p data-ru="–ì–ª—É–±–æ–∫–æ–µ –∏–∑—É—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º, –ø–æ–∏—Å–∫ –∫–æ—Ä–µ–Ω–Ω–æ–π –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º, –±–µ–∑ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞." data-en="Deep system exploration, finding root causes without surface-level analysis."></p>
      </div>
    </div>
  </section>

  <section id="projects">
    <div class="filter" id="projectFilters"></div>
    <div class="grid" id="projectsGrid"></div>
  </section>

  <section id="links">
    <div class="card">
      <ul>
        <li>üêô GitHub ‚Äî <a href="https://github.com/lixynhay" target="_blank" rel="noopener noreferrer">lixynhay</a></li>
        <li>üí¨ Telegram ‚Äî @lixynhay</li>
        <li>üìß Email ‚Äî <a href="mailto:lixynhay@gmail.com">lixynhay@gmail.com</a></li>
      </ul>
    </div>
  </section>
</div>

<footer>¬© <span id="year"></span> ‚Ä¢ LixynHay</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
(() => {
  /* ---------- 1. Utils ---------- */
  const $ = q => document.querySelector(q);
  const on = (el, ev, fn) => el.addEventListener(ev, fn);

  /* ---------- 2. Typewriter ---------- */
  const text = "Hi!";
  let i = 0;
  function typeWriter() {
    if (i < text.length) {
      $("#typed").textContent += text.charAt(i);
      i++;
      setTimeout(typeWriter, 120);
    }
  }
  typeWriter();

  /* ---------- 3. Parallax ---------- */
  on(window, "scroll", () => {
    const y = window.scrollY;
    $("header h1").style.transform = `translateY(${y * 0.3}px)`;
    $("header p").style.transform = `translateY(${y * 0.2}px)`;
  });

  /* ---------- 4. Smooth scroll ---------- */
  window.scrollToSection = id => {
    const el = $(`#${id}`);
    if (el) el.scrollIntoView({ behavior: "smooth", block: "start" });
  };

  /* ---------- 5. Language auto + fallback ---------- */
  const RU = "ru", EN = "en";
  function applyLang(lang) {
    const l = (lang === RU || lang === EN) ? lang : RU;
    document.querySelectorAll("[data-ru]").forEach(el => {
      el.textContent = el.dataset[l] || el.dataset.ru;
    });
    localStorage.userLang = l;
  }
  window.setLang = code => applyLang(code);

  async function autoLang() {
    if (localStorage.userLang) {
      applyLang(localStorage.userLang);
      return;
    }
    try {
      const geo = await fetch("https://ipapi.co/json").then(r => r.json());
      const country = geo.country_code;
      if (["US", "GB", "CA", "AU"].includes(country)) {
        applyLang(EN);
        return;
      }
    } catch (e) {}
    const navLang = navigator.language.slice(0, 2).toLowerCase();
    applyLang(navLang === "en" ? EN : RU);
  }
  on(document, "DOMContentLoaded", autoLang);

  /* ---------- 6. Theme ---------- */
  function applyTheme() {
    const stored = localStorage.theme;
    const prefers = window.matchMedia("(prefers-color-scheme: light)").matches ? "light" : "";
    const theme = stored || prefers;
    document.body.classList.toggle("light", theme === "light");
  }
  window.toggleTheme = () => {
    document.body.classList.toggle("light");
    localStorage.theme = document.body.classList.contains("light") ? "light" : "";
  };
  on(document, "DOMContentLoaded", applyTheme);

  /* ---------- 7. CV ---------- */
  window.downloadCV = () => {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.text(`LixynHay\nEngineer & Systems Researcher\n\nSkills:\n- Linux Kernel & Drivers\n- ESP32 / Arduino\n- C / C++ Programming\n- Debugging & Log Analysis\n- Hardware & Soldering\n\nGitHub: github.com/lixynhay`, 10, 10);
    doc.save("LixynHay_CV.pdf");
  };

  /* ---------- 8. GitHub Projects ---------- */
  const CACHE_KEY = "gh-cache";
  const CACHE_TTL = 1000 * 60 * 10;
  let allRepos = [];

  async function fetchRepos() {
    const cached = sessionStorage.getItem(CACHE_KEY);
    if (cached) {
      const { ts, data } = JSON.parse(cached);
      if (Date.now() - ts < CACHE_TTL) return data;
    }
    const res = await fetch("https://api.github.com/users/lixynhay/repos?per_page=100");
    const data = await res.json();
    sessionStorage.setItem(CACHE_KEY, JSON.stringify({ ts: Date.now(), data }));
    return data;
  }

  async function loadProjects() {
    allRepos = (await fetchRepos()).filter(r => !r.fork);
    populateFilters();
    showProjects();
  }

  function populateFilters() {
    const langs = ["All", ...new Set(allRepos.map(r => r.language).filter(l => l))];
    const filterDiv = $("#projectFilters");
    filterDiv.innerHTML = "";
    langs.forEach((l, idx) => {
      const btn = document.createElement("button");
      btn.textContent = l;
      btn.className = idx === 0 ? "active" : "";
      btn.onclick = () => {
        filterDiv.querySelectorAll("button").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        showProjects(l === "All" ? null : l);
      };
      filterDiv.appendChild(btn);
    });
  }

  function showProjects(lang = null) {
    const grid = $("#projectsGrid");
    grid.innerHTML = "";
    allRepos
      .filter(r => !lang || r.language === lang)
      .sort((a, b) => b.stargazers_count - a.stargazers_count)
      .slice(0, 12)
      .forEach(r => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <h3>‚≠ê ${r.name}</h3>
          <p>${r.description || "–ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è"}</p>
          <p>üß† ${r.language || "‚Äî"} | ‚≠ê ${r.stargazers_count}</p>
          <a href="${r.html_url}" target="_blank" rel="noopener noreferrer">–û—Ç–∫—Ä—ã—Ç—å ‚Üí</a>
        `;
        grid.appendChild(card);
      });
  }

  loadProjects();

  /* ---------- 9. Scroll reveal ---------- */
  const sections = document.querySelectorAll("section");
  const reveal = () => {
    const trigger = window.scrollY + window.innerHeight * 0.75;
    sections.forEach(sec => {
      if (sec.offsetTop < trigger) sec.classList.add("visible");
    });
  };
  on(window, "scroll", reveal);
  reveal();

  /* ---------- 10. Canvas particles (Retina) ---------- */
  const c = $("#bg");
  const ctx = c.getContext("2d");
  let w, h, dpr, particles, mouse = { x: null, y: null };

  on(window, "mousemove", e => {
    mouse.x = e.clientX;
    mouse.y = e.clientY;
  });

  function resize() {
    w = c.clientWidth;
    h = c.clientHeight;
    dpr = window.devicePixelRatio || 1;
    c.width = w * dpr;
    c.height = h * dpr;
    c.style.width = w + "px";
    c.style.height = h + "px";
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    particles = Array.from({ length: 80 }, () => ({
      x: Math.random() * w,
      y: Math.random() * h,
      r: Math.random() * 2 + 1,
      v: Math.random() * 0.6 + 0.2,
      hue: Math.random() * 360
    }));
  }

  function draw() {
    ctx.clearRect(0, 0, w, h);
    particles.forEach(p => {
      p.y += p.v;
      if (p.y > h) p.y = 0;
      const dx = mouse.x - p.x;
      const dy = mouse.y - p.y;
      const dist = Math.sqrt(dx * dx + dy * dy);
      const radius = p.r + (dist < 100 ? 20 * (1 - dist / 100) : 0);
      ctx.beginPath();
      ctx.fillStyle = `hsl(${p.hue}, 70%, 60%)`;
      ctx.arc(p.x, p.y, radius, 0, Math.PI * 2);
      ctx.fill();
    });
    requestAnimationFrame(draw);
  }

  on(window, "resize", resize);
  resize();
  draw();

  /* ---------- 11. Dynamic year ---------- */
  $("#year").textContent = new Date().getFullYear();
})();
</script>
</body>
</html>
